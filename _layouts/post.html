---
layout: default
---

<div id="reading-progress-bar"></div>

<article class="post-container" itemscope itemtype="https://schema.org/BlogPosting">

  <a href="{{ '/' | relative_url }}" class="btn-back" id="back-to-hub">
    <span>{{ site.data[site.active_lang].strings.back_to_hub }}</span>
  </a>

  <h1 itemprop="headline" style="view-transition-name: post-{{ page.slug }};">{{ page.title }}</h1>
  <div class="post-header-meta">
    <time class="post-date" datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
      {{ page.date | date: "%d %B %Y" }}
    </time>
    {% assign words = content | strip_html | number_of_words %}
    {% assign read_time = words | divided_by: 160 %}
    {% if read_time == 0 %}{% assign read_time = 1 %}{% endif %}
    <span class="badge badge--reading-time">‚è≥ {{ read_time }} {{ site.data[site.active_lang].strings.min_read }}</span>
  </div>

  <div itemprop="articleBody">
    {{ content | replace: '<img', '<img loading="lazy"' }} </div>

      {% if page.tags.size > 0 %}
      <div class="post-tags">
        {% for tag in page.tags %}
        <span class="post-tag">#{{ tag }}</span>
        {% endfor %}
      </div>
      {% endif %}

</article>

<!-- RELATED POSTS BENTO -->
{% assign maxRelated = 3 %}
{% assign minCommonTags = 1 %}
{% assign relatedCount = 0 %}

{% capture related_posts_html %}
{% for post in site.posts %}
{% comment %} 1. Filter out exact same post and mismatched language {% endcomment %}
{% if post.url != page.url and post.lang == site.active_lang %}
{% assign sameTagCount = 0 %}

{% comment %} 2. Check for matching categories {% endcomment %}
{% for category in post.categories %}
{% if page.categories contains category %}
{% assign sameTagCount = sameTagCount | plus: 1 %}
{% endif %}
{% endfor %}

{% comment %} 3. Check for matching tags (failsafe for flexibility) {% endcomment %}
{% for tag in post.tags %}
{% if page.tags contains tag %}
{% assign sameTagCount = sameTagCount | plus: 1 %}
{% endif %}
{% endfor %}

{% comment %} 4. Print if condition is met {% endcomment %}
{% if sameTagCount >= minCommonTags %}
<a class="related-bento__card bento-tilt-target" href="{{ post.url | relative_url }}">
  {% assign main_tag = post.categories.first | default: post.tags.first %}
  {% if main_tag %}
  <span class="related-bento__badge">{{ main_tag }}</span>
  {% endif %}
  <h3 class="related-bento__title">{{ post.title }}</h3>
  <time class="related-bento__date" datetime="{{ post.date | date_to_xmlschema }}">
    {{ post.date | date: "%d %B %Y" }}
  </time>
</a>

{% assign relatedCount = relatedCount | plus: 1 %}
{% if relatedCount >= maxRelated %}
{% break %}
{% endif %}
{% endif %}
{% endif %}
{% endfor %}
{% endcapture %}

{% comment %} Only display the wrapper if related posts were actually found {% endcomment %}
{% if relatedCount > 0 %}
<section class="related-bento">
  <h3 class="related-bento__heading">
    <span>{{ site.data[site.active_lang].strings.related_posts }}</span>
  </h3>

  <div class="related-bento__grid">
    {{ related_posts_html }}
  </div>
</section>
{% endif %}