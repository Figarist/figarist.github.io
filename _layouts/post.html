---
layout: default
---

<article class="post-container" itemscope itemtype="https://schema.org/BlogPosting">

  <a href="{{ '/' | relative_url }}" class="btn-back" id="back-to-hub">
    <span>{{ site.data[site.active_lang].strings.back_to_hub }}</span>
  </a>

  <h1 itemprop="headline">{{ page.title }}</h1>
  <time class="post-date" datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
    {{ page.date | date: "%d %B %Y" }}
  </time>

  <div itemprop="articleBody">
    {{ content | replace: '<img', '<img loading="lazy"' }} </div>

      {% if page.tags.size > 0 %}
      <div class="post-tags">
        {% for tag in page.tags %}
        <span class="post-tag">#{{ tag }}</span>
        {% endfor %}
      </div>
      {% endif %}

</article>

<!-- RELATED POSTS BENTO -->
{% assign maxRelated = 3 %}
{% assign minCommonTags = 1 %}
{% assign relatedCount = 0 %}

{% capture related_posts_html %}
{% for post in site.posts %}
{% comment %} 1. Filter out exact same post and mismatched language {% endcomment %}
{% if post.url != page.url and post.lang == site.active_lang %}
{% assign sameTagCount = 0 %}

{% comment %} 2. Check for matching categories {% endcomment %}
{% for category in post.categories %}
{% if page.categories contains category %}
{% assign sameTagCount = sameTagCount | plus: 1 %}
{% endif %}
{% endfor %}

{% comment %} 3. Check for matching tags (failsafe for flexibility) {% endcomment %}
{% for tag in post.tags %}
{% if page.tags contains tag %}
{% assign sameTagCount = sameTagCount | plus: 1 %}
{% endif %}
{% endfor %}

{% comment %} 4. Print if condition is met {% endcomment %}
{% if sameTagCount >= minCommonTags %}
<a class="related-bento__card bento-tilt-target" href="{{ post.url | relative_url }}">
  {% assign main_tag = post.categories.first | default: post.tags.first %}
  {% if main_tag %}
  <span class="related-bento__badge">{{ main_tag }}</span>
  {% endif %}
  <h3 class="related-bento__title">{{ post.title }}</h3>
  <time class="related-bento__date" datetime="{{ post.date | date_to_xmlschema }}">
    {{ post.date | date: "%d %B %Y" }}
  </time>
</a>

{% assign relatedCount = relatedCount | plus: 1 %}
{% if relatedCount >= maxRelated %}
{% break %}
{% endif %}
{% endif %}
{% endif %}
{% endfor %}
{% endcapture %}

{% comment %} Only display the wrapper if related posts were actually found {% endcomment %}
{% if relatedCount > 0 %}
<section class="related-bento">
  <h3 class="related-bento__heading">
    <span>{{ site.data[site.active_lang].strings.related_posts }}</span>
  </h3>

  <div class="related-bento__grid">
    {{ related_posts_html }}
  </div>
</section>
{% endif %}

<!-- JSON-LD: BlogPosting -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": {{ page.title | jsonify }},
  "datePublished": "{{ page.date | date_to_xmlschema }}",
  "dateModified": "{{ page.last_modified_at | default: page.date | date_to_xmlschema }}",
  "inLanguage": "{{ site.active_lang }}",
  "author": {
    "@type": "Person",
    "name": "Figarist",
    "url": "https://figarist.github.io"
  },
  "publisher": {
    "@type": "Person",
    "name": "Figarist",
    "url": "https://figarist.github.io"
  },
  "url": "{{ page.url | absolute_url }}",
  "description": {{ page.description | default: page.excerpt | strip_html | jsonify }}
}
</script>